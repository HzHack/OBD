<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3209/3209995.png">

    <title>PRO MECHANIC | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff6b00;      
            --accent: #6366f1;       
            --success: #10b981;      
            --bg-dark: #0f172a;      
            --glass: rgba(30, 41, 59, 0.75);
            --border: rgba(255, 255, 255, 0.1);
            --text: #f8fafc;
            --insta-grad: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text);
            background-image: 
                linear-gradient(rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.96)),
                url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 20h20v20H20zM0 0h20v20H0z' fill='%23ff6b00' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
            min-height: 100vh;
            padding-bottom: 80px;
            scroll-behavior: smooth;
        }

        header { text-align: center; padding: 30px 20px; }
        h1 {
            font-size: 2.5rem; font-weight: 900; margin: 0;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .status-badge {
            background: rgba(16, 185, 129, 0.1); color: var(--success);
            padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;
            border: 1px solid rgba(16, 185, 129, 0.2); margin-top: 10px; display: inline-block;
        }

        .container { max-width: 900px; margin: 0 auto; padding: 0 15px; }

        .card {
            background: var(--glass);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border);
            border-radius: 24px; padding: 25px; margin-bottom: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            position: relative; overflow: hidden;
        }
        .card::before {
            content:''; position: absolute; top:0; left:0; width:100%; height:4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .section-head { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .section-head h2 { font-size: 1.3rem; color: #fff; margin: 0; }
        .icon-box { 
            width: 40px; height: 40px; background: rgba(255,255,255,0.05); 
            border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
        }

        .input-group { margin-bottom: 15px; }
        input, select, textarea {
            width: 100%; padding: 18px; 
            background: rgba(10, 15, 30, 0.6);
            border: 2px solid var(--border); border-radius: 16px;
            color: #fff; font-family: 'Cairo'; font-size: 1.1rem; transition: 0.3s;
        }
        input:focus, select:focus, textarea:focus { border-color: var(--primary); transform: translateY(-2px); }

        .btn-row { display: flex; gap: 12px; margin-top: 10px; }
        button {
            flex: 1; padding: 18px; border: none; border-radius: 16px;
            font-family: 'Cairo'; font-weight: 800; font-size: 1rem; cursor: pointer;
            transition: 0.2s; display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        button:active { transform: scale(0.97); }
        .btn-scan { background: linear-gradient(135deg, var(--primary), #ea580c); color: #fff; box-shadow: 0 4px 20px rgba(255, 107, 0, 0.25); }
        .btn-ai { background: linear-gradient(135deg, var(--accent), #4f46e5); color: #fff; }
        .btn-ghost { background: rgba(255,255,255,0.08); color: #fff; }

        /* VIN & Notes */
        .vin-result { display: none; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 16px; margin-top: 15px; border: 1px dashed var(--border); }
        .vin-tag { display: inline-block; background: var(--accent); padding: 5px 10px; border-radius: 10px; font-size: 0.8rem; margin-right: 5px; }
        .notes-area { min-height: 150px; line-height: 1.6; font-size: 1rem; }

        /* Results */
        #resultCard { display: none; margin-top: 20px; animation: slideUp 0.5s ease; }
        .the-code { font-size: 3.5rem; font-weight: 900; color: var(--primary); line-height: 1; text-shadow: 0 0 30px rgba(255, 107, 0, 0.4); text-align: center; }
        .ai-box { background: rgba(99, 102, 241, 0.08); border: 1px dashed var(--accent); padding: 20px; border-radius: 16px; margin-top: 20px; display: none; }

        /* Footer */
        footer { text-align: center; margin-top: 50px; border-top: 1px solid var(--border); padding-top: 30px; color: #64748b; }
        .social-container { display: flex; justify-content: center; gap: 15px; margin-top: 15px; flex-wrap: wrap; }
        .social-btn {
            display: flex; align-items: center; gap: 8px; padding: 10px 20px;
            border-radius: 50px; text-decoration: none; color: #fff; font-weight: bold; font-size: 0.9rem;
            transition: transform 0.3s;
        }
        .social-btn:hover { transform: translateY(-3px); }
        .insta { background: var(--insta-grad); }
        .snap { background: #FFFC00; color: #000; }
        .twitter { background: #1DA1F2; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <h1>PRO MECHANIC</h1>
        <div id="dbStatus" class="status-badge">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…...</div>
    </header>

    <div class="container">

        <section class="card" id="diagnosticSection">
            <div class="section-head">
                <div class="icon-box">ğŸ§ </div>
                <h2>ÙØ­Øµ Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ (OBD-II)</h2>
            </div>

            <div class="input-group">
                <select id="carBrand">
                    <option value="Generic">ğŸï¸ Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø© (Ø¹Ø§Ù…)</option>
                    <option value="Toyota">ğŸ‡¯ğŸ‡µ ØªÙˆÙŠÙˆØªØ§ / Ù„ÙƒØ²Ø³</option>
                    <option value="Nissan">ğŸ‡¯ğŸ‡µ Ù†ÙŠØ³Ø§Ù† / Ø¥Ù†ÙÙŠÙ†ÙŠØªÙŠ</option>
                    <option value="Hyundai">ğŸ‡°ğŸ‡· Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ / ÙƒÙŠØ§</option>
                    <option value="GM">ğŸ‡ºğŸ‡¸ Ø´ÙØ±ÙˆÙ„ÙŠÙ‡ / Ø¬Ù…Ø³</option>
                    <option value="Ford">ğŸ‡ºğŸ‡¸ ÙÙˆØ±Ø¯ / Ù„ÙŠÙ†ÙƒÙˆÙ„Ù†</option>
                    <option value="German">ğŸ‡©ğŸ‡ª Ù…Ø±Ø³ÙŠØ¯Ø³ / Ø¨ÙŠ Ø§Ù…</option>
                </select>
            </div>

            <div class="input-group">
                <input type="text" id="codeInput" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø·Ù„ (Ù…Ø«Ø§Ù„: P0300)">
            </div>

            <div class="btn-row">
                <button class="btn-scan" onclick="performScan(false)">ğŸ” ÙØ­Øµ</button>
                <button class="btn-ai" onclick="performScan(true)">ğŸ¤– ØªØ­Ù„ÙŠÙ„ AI</button>
            </div>

            <div style="margin-top:15px; overflow-x:auto; white-space:nowrap; padding-bottom:5px;" id="historyList"></div>

            <div id="resultCard">
                <div class="the-code" id="resCode">P0000</div>
                <div style="text-align:center; color:#94a3b8; margin-bottom:15px;" id="resSystem">Unknown System</div>

                <div style="background:rgba(0,0,0,0.2); border-radius:12px; padding:15px;">
                    <div style="margin-bottom:10px;"><span style="color:#94a3b8;">Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</span> <strong id="resMean" style="color:#fff; float:left;">-</strong></div>
                    <div style="clear:both; border-top:1px solid rgba(255,255,255,0.1); margin:10px 0;"></div>
                    <div><span style="color:#94a3b8;">Ø§Ù„Ø­Ù„:</span> <strong id="resFix" style="color:var(--success); float:left;">-</strong></div>
                </div>

                <div id="aiPanel" class="ai-box">
                    <strong style="color:var(--accent);">ğŸ’¡ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</strong>
                    <p id="aiText" style="margin-top:8px; line-height:1.6; color:#e2e8f0; font-size:0.95rem;">-</p>
                </div>

                <a href="#" id="waLink" target="_blank" style="display:block; text-align:center; background:#25D366; color:#fff; padding:15px; border-radius:16px; margin-top:20px; text-decoration:none; font-weight:bold;">ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ± (ÙˆØ§ØªØ³Ø§Ø¨)</a>
            </div>
        </section>

        <section class="card">
            <div class="section-head">
                <div class="icon-box">ğŸš—</div>
                <h2>ÙÙƒ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„ (VIN)</h2>
            </div>
            <div class="input-group">
                <input type="text" id="vinInput" maxlength="17" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø´Ø§ØµÙŠ (17 Ø®Ø§Ù†Ø©)" style="letter-spacing: 2px; text-transform: uppercase;">
            </div>
            <button class="btn-ghost" onclick="decodeVIN()" style="width: 100%;">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù…</button>
            
            <div id="vinResult" class="vin-result">
                <div style="margin-bottom: 5px;"><span class="vin-tag">Ø§Ù„Ø¨Ù„Ø¯</span> <strong id="vinCountry">-</strong></div>
                <div style="margin-bottom: 5px;"><span class="vin-tag">Ø§Ù„Ø³Ù†Ø©</span> <strong id="vinYear">-</strong></div>
                <div><span class="vin-tag">Ø§Ù„Ø­Ø§Ù„Ø©</span> <strong style="color:var(--success)">Ø±Ù‚Ù… ØµØ­ÙŠØ­ (Valid Format)</strong></div>
            </div>
        </section>

        <section class="card">
            <div class="section-head">
                <div class="icon-box">âš–ï¸</div>
                <h2>Ù…Ø­ÙˆÙ„Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø§Øª</h2>
            </div>
            
            <h3 style="color:var(--primary); font-size:1rem; margin-bottom:10px;">ğŸ”§ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ø²Ù… (Torque)</h3>
            <div class="converter-grid">
                <div><span class="unit-label">Nm</span><input type="number" id="nmInput" class="conv-input" placeholder="0" oninput="convertTorque('nm')"></div>
                <div><span class="unit-label">ft-lb</span><input type="number" id="ftlbInput" class="conv-input" placeholder="0" oninput="convertTorque('ftlb')"></div>
            </div>

            <h3 style="color:var(--primary); font-size:1rem; margin-bottom:10px; border-top:1px solid var(--border); padding-top:10px;">ğŸ’¨ Ø¶ØºØ· Ø§Ù„Ù‡ÙˆØ§Ø¡ (Pressure)</h3>
            <div class="converter-grid">
                <div><span class="unit-label">PSI</span><input type="number" id="psiInput" class="conv-input" placeholder="0" oninput="convertPressure('psi')"></div>
                <div><span class="unit-label">Bar</span><input type="number" id="barInput" class="conv-input" placeholder="0" oninput="convertPressure('bar')"></div>
            </div>
        </section>

        <section class="card">
            <div class="section-head">
                <div class="icon-box">ğŸ“</div>
                <h2>Ù…ÙÙƒØ±Ø© Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ</h2>
            </div>
            <textarea id="myNotes" class="notes-area" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù‡Ù†Ø§ (Ø³ÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)... Ù…Ø«Ø§Ù„: Ù…ÙˆØ¹Ø¯ ØªØºÙŠÙŠØ± Ø²ÙŠØª Ù„Ù„Ø²Ø¨ÙˆÙ† Ù…Ø­Ù…Ø¯" oninput="saveNotes()"></textarea>
            <div style="text-align:left; font-size:0.8rem; color:var(--success); margin-top:5px;">âœ… ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>
        </section>

        <section class="card">
            <div class="section-head">
                <div class="icon-box">ğŸ§®</div>
                <h2>Ø£Ø¯ÙˆØ§Øª & Ø£ÙƒÙˆØ§Ø¯</h2>
            </div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:20px;">
                <button class="btn-ghost" onclick="renderTable('all')">ğŸ“š Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</button>
                <div style="background:rgba(255,255,255,0.05); padding:10px; border-radius:12px; text-align:center;">
                    <div style="font-size:0.8rem; color:var(--accent);">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…ÙƒÙŠÙ†Ø©</div>
                    <div style="display:flex; gap:2px; margin-top:5px;">
                        <input id="boreInput" placeholder="B" style="padding:5px; font-size:0.8rem; width:30%;">
                        <input id="strokeInput" placeholder="S" style="padding:5px; font-size:0.8rem; width:30%;">
                        <input id="cylInput" placeholder="C" style="padding:5px; font-size:0.8rem; width:30%;">
                    </div>
                    <button onclick="calcCC()" style="background:var(--primary); width:100%; padding:5px; margin-top:5px; border-radius:5px; border:none; color:white;">Ø§Ø­Ø³Ø¨ CC</button>
                    <div id="ccDisplay" style="color:var(--success); font-weight:bold; font-size:0.9rem; margin-top:5px;"></div>
                </div>
            </div>
            
            <div style="overflow-x:auto; max-height:250px;">
                <table style="width:100%; text-align:right; border-collapse:collapse;">
                    <thead><tr style="color:var(--primary); position:sticky; top:0; background:var(--glass);"><th style="padding:10px;">Ø§Ù„ÙƒÙˆØ¯</th><th>Ø§Ù„ÙˆØµÙ</th></tr></thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </section>

    </div>

    <footer>
        <div style="font-weight:bold; font-size:1.1rem; color:#fff; margin-bottom:10px;">
            ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: <span style="color:var(--primary);">Ø§Ø¨Ùˆ Ø¹Ø³Ø§Ù Hz</span>
        </div>
        
        <div class="social-container">
            <a href="https://instagram.com/sww_p" target="_blank" class="social-btn insta">ğŸ“· Instagram</a>
            <a href="https://snapchat.com/add/sww_p" target="_blank" class="social-btn snap">ğŸ‘» Snapchat</a>
            <a href="https://twitter.com/sww_p" target="_blank" class="social-btn twitter">ğŸ¦ Twitter</a>
        </div>
        
        <p style="margin-top:20px; font-size:0.8rem;">Ù†Ø³Ø®Ø© S23 Ultra Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Â© 2026</p>
    </footer>

    <script>
        /* =========================================
           JAVASCRIPT LOGIC
           ========================================= */
        let db = [];
        function add(c, m, f, sys, b) { if(!db.some(x=>x.c===c)) db.push({c, m, f, sys, b}); }

        // 1. Data Population
        add("P0101", "Ø£Ø¯Ø§Ø¡ Ø­Ø³Ø§Ø³ MAF", "ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ø³Ø§Ø³", "Air", "All");
        add("P0171", "Ø®Ù„ÙŠØ· ÙÙ‚ÙŠØ± (Lean)", "ÙØ­Øµ ØªÙ‡Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡", "Fuel", "All");
        add("P0300", "ÙÙ‚Ø¯ Ø¥Ø´Ø¹Ø§Ù„ (Misfire)", "Ø¨ÙˆØ§Ø¬ÙŠ / ÙƒÙˆÙŠÙ„Ø§Øª", "Ignition", "All");
        add("P0420", "ÙƒÙØ§Ø¡Ø© Ø¯Ø¨Ø© Ø§Ù„ØªÙ„ÙˆØ«", "ÙØ­Øµ Ø§Ù„Ø¯Ø¨Ø©", "Exhaust", "All");
        add("P0442", "ØªØ³Ø±ÙŠØ¨ ØªØ¨Ø®ÙŠØ± Ø¨Ø³ÙŠØ·", "ØªØºÙŠÙŠØ± ØºØ·Ø§Ø¡ Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†", "EVAP", "All");
        add("P0700", "Ø¹Ø·Ù„ Ù‚ÙŠØ±", "ÙØ­Øµ ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù‚ÙŠØ±", "Trans", "All");

        for(let i=100; i<999; i++) {
            let c="P0"+i;
            if(!db.some(x=>x.c===c)) {
                let sys="General";
                if(i<200) sys="Fuel/Air";
                else if(i<300) sys="Injection";
                else if(i<400) sys="Ignition";
                else if(i<500) sys="Emission";
                else if(i<600) sys="Speed";
                else if(i<700) sys="ECU";
                else sys="Trans";
                add(c, "Ø¹Ø·Ù„ ÙÙŠ Ù†Ø¸Ø§Ù… "+sys, "ÙØ­Øµ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©", sys, "Generic");
            }
        }
        document.getElementById('dbStatus').innerText = "Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²: "+db.length+" ÙƒÙˆØ¯";

        // 2. Diagnostics
        function performScan(isAI) {
            let input = document.getElementById('codeInput').value.toUpperCase().trim();
            let brand = document.getElementById('carBrand').value;
            let card = document.getElementById('resultCard');
            
            if(!input) { alert("Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯!"); return; }
            card.style.display = "none";
            
            if(isAI) {
                document.getElementById('dbStatus').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...";
                setTimeout(() => { showResult(input, brand, true); document.getElementById('dbStatus').innerText = "ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„"; }, 1500);
            } else {
                showResult(input, brand, false);
            }
        }

        function showResult(code, brand, isAI) {
            let item = db.find(x => x.c === code);
            let displayBrand = brand === "Generic" ? (item ? item.sys : "System") : brand;

            document.getElementById('resultCard').style.display = "block";
            document.getElementById('resCode').innerText = code;
            document.getElementById('resSystem').innerText = displayBrand + " System";

            // Add History Chip
            let hist = document.getElementById('historyList');
            let chip = document.createElement('span');
            chip.style.cssText = "background:rgba(255,255,255,0.1); padding:5px 15px; border-radius:20px; margin-right:5px; color:#ccc; cursor:pointer; display:inline-block;";
            chip.innerText = code;
            chip.onclick = () => { loadCodeFromClick(code); };
            hist.prepend(chip);

            if(item) {
                document.getElementById('resMean').innerText = item.m;
                document.getElementById('resFix').innerText = item.f;
                let wa = `*ØªÙ‚Ø±ÙŠØ± ÙÙ†ÙŠ*\nğŸš˜ ${brand}\nâš ï¸ ${code}\nğŸ› ï¸ ${item.m}\nğŸ”§ ${item.f}`;
                document.getElementById('waLink').href = `https://wa.me/?text=${encodeURIComponent(wa)}`;
            } else {
                document.getElementById('resMean').innerText = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
                document.getElementById('resFix').innerText = "ÙØ­Øµ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…ØµÙ†Ø¹";
            }

            let aiPanel = document.getElementById('aiPanel');
            if(isAI) {
                aiPanel.style.display = "block";
                let t = `ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ù„Ù„ÙƒÙˆØ¯ ${code} (${brand}):\n`;
                if(code.startsWith("P03")) t+="Ù…Ø´ÙƒÙ„Ø© Ø¥Ø´Ø¹Ø§Ù„. Ø§Ø¨Ø¯Ø£ Ø¨ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙˆÙŠÙ„Ø§Øª (Swapping).";
                else if(code.startsWith("P017")) t+="Ù…Ø´ÙƒÙ„Ø© Ø®Ù„ÙŠØ· ÙˆÙ‚ÙˆØ¯. Ø§ÙØ­Øµ ØªÙ‡Ø±ÙŠØ¨ Ø§Ù„Ù‡ÙˆØ§Ø¡ (Vacuum).";
                else if(code.startsWith("P07")) t+="Ù…Ø´ÙƒÙ„Ø© Ù‚ÙŠØ±. Ø§ÙØ­Øµ Ø§Ù„Ø²ÙŠØª Ø£ÙˆÙ„Ø§Ù‹.";
                else t+="ÙŠØ±Ø¬Ù‰ ÙØ­Øµ Ø§Ù„ÙÙŠÙˆØ²Ø§Øª ÙˆØ§Ù„Ø£Ø³Ù„Ø§Ùƒ Ù‚Ø¨Ù„ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù‚Ø·Ø¹.";
                document.getElementById('aiText').innerText = t;
            } else {
                aiPanel.style.display = "none";
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ù„ØµØ¹ÙˆØ¯ Ù„Ù„Ø£Ø¹Ù„Ù‰
        function loadCodeFromClick(code) {
            document.getElementById('codeInput').value = code;
            // Ø§Ù„ØµØ¹ÙˆØ¯ Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ­Øµ
            document.getElementById('diagnosticSection').scrollIntoView({behavior: 'smooth'});
            // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ­Øµ
            performScan(false);
        }

        // 3. New Features
        function saveNotes() {
            localStorage.setItem('mechanic_notes', document.getElementById('myNotes').value);
        }
        
        function decodeVIN() {
            let vin = document.getElementById('vinInput').value.toUpperCase();
            if(vin.length !== 17) { alert("Ø±Ù‚Ù… Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 17 Ø®Ø§Ù†Ø©"); return; }
            let country = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
            let c1 = vin.charAt(0);
            if('145'.includes(c1)) country="Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø© (USA)";
            else if('J'.includes(c1)) country="Ø§Ù„ÙŠØ§Ø¨Ø§Ù† (Japan)";
            else if('K'.includes(c1)) country="ÙƒÙˆØ±ÙŠØ§ (Korea)";
            else if('W'.includes(c1)) country="Ø£Ù„Ù…Ø§Ù†ÙŠØ§ (Germany)";
            let yearChar = vin.charAt(9);
            let year = "20XX"; 
            if(yearChar === 'L') year = "2020";
            if(yearChar === 'M') year = "2021";
            if(yearChar === 'N') year = "2022";
            if(yearChar === 'P') year = "2023";
            document.getElementById('vinResult').style.display = "block";
            document.getElementById('vinCountry').innerText = country;
            document.getElementById('vinYear').innerText = year;
        }

        // 4. Converters
        function convertTorque(type) {
            let nm = document.getElementById('nmInput');
            let ft = document.getElementById('ftlbInput');
            if(type === 'nm') ft.value = (nm.value * 0.73756).toFixed(1);
            else nm.value = (ft.value * 1.3558).toFixed(1);
        }
        function convertPressure(type) {
            let psi = document.getElementById('psiInput');
            let bar = document.getElementById('barInput');
            if(type === 'psi') bar.value = (psi.value * 0.0689).toFixed(2);
            else psi.value = (bar.value * 14.5038).toFixed(1);
        }

        // 5. Calcs & Table
        function calcCC() {
            let b = document.getElementById('boreInput').value;
            let s = document.getElementById('strokeInput').value;
            let c = document.getElementById('cylInput').value;
            if(b&&s&&c) document.getElementById('ccDisplay').innerText = ((Math.PI * Math.pow(b/2,2) * s * c)/1000).toFixed(0) + " CC";
        }

        function renderTable(f) {
            let tb = document.getElementById('tableBody'); tb.innerHTML="";
            let d = f==='all'?db:db.filter(x=>x.b===f||x.b==='All');
            d.slice(0,30).forEach(x=>{
                // Ù‡Ù†Ø§ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙ ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„ØµØ¹ÙˆØ¯
                tb.innerHTML+=`<tr onclick="loadCodeFromClick('${x.c}')"><td style="padding:10px; border-bottom:1px solid #333; color:#ff6b00; font-weight:bold;">${x.c}</td><td style="padding:10px; border-bottom:1px solid #333; color:#ccc;">${x.m}</td></tr>`;
            });
        }

        // Init
        window.onload = function() {
            renderTable('all');
            if(localStorage.getItem('mechanic_notes')) document.getElementById('myNotes').value = localStorage.getItem('mechanic_notes');
        };
    </script>
</body>
</html>
            padding-bottom: 20px; /* Ù…Ø³Ø§ÙØ© Ø¥Ø¶Ø§ÙÙŠØ© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ */
        }

        /* Header Responsive */
        header {
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            border-bottom: 3px solid var(--primary);
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        header h1 {
            font-weight: 900;
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            text-shadow: 2px 2px 0px var(--primary);
        }

        @media (min-width: 768px) {
            header h1 { font-size: 2.5rem; }
        }

        header p { color: var(--text-dim); font-size: 0.9rem; margin-top: 5px; }

        .container { max-width: 1100px; margin: 0 auto; padding: 1rem; }

        .card {
            background-color: var(--panel-bg);
            border: 2px solid var(--border-metal);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-hard);
            position: relative;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 4px;
            background: repeating-linear-gradient(45deg, var(--primary), var(--primary) 10px, #000 10px, #000 20px);
        }

        h2.section-title {
            color: var(--primary);
            margin-bottom: 1.5rem;
            border-bottom: 2px dashed var(--border-metal);
            padding-bottom: 10px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Inputs & Buttons Responsive */
        .search-box { display: flex; gap: 10px; flex-wrap: wrap; }

        input[type="text"], input[type="number"], select {
            background: #0f172a;
            border: 2px solid var(--border-metal);
            color: var(--text-light);
            padding: 14px;
            font-family: 'Cairo', sans-serif;
            font-weight: 600;
            border-radius: 8px;
            width: 100%;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        @media (min-width: 768px) {
            .search-box input { flex: 2; }
        }

        input:focus { border-color: var(--primary); }

        .btn {
            background-color: var(--primary);
            color: #000;
            padding: 14px 20px;
            border: none;
            font-weight: 900;
            cursor: pointer;
            border-radius: 8px;
            text-transform: uppercase;
            box-shadow: 3px 3px 0px rgba(0,0,0,0.5);
            transition: all 0.2s;
            font-family: 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }

        @media (min-width: 600px) {
            .btn { width: auto; }
        }

        .btn:hover { transform: translate(-1px, -1px); background-color: var(--primary-hover); }
        .btn:active { transform: translate(1px, 1px); box-shadow: 0px 0px 0px; }
        .btn-secondary { background-color: #334155; color: #fff; border: 1px solid #475569; }
        .btn-ai { background: linear-gradient(45deg, #3b82f6, #8b5cf6); color: #fff; border: none; }

        /* Result Box */
        .result-box {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-metal);
            padding: 1.2rem;
            margin-top: 1rem;
            display: none;
            border-radius: 8px;
            animation: slideIn 0.3s;
        }
        .result-box.active { display: block; }
        
        .code-display {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: 2px;
        }
        @media (max-width: 400px) { .code-display { font-size: 1.5rem; } }

        /* Calculators Grid */
        .calc-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        @media (min-width: 768px) {
            .calc-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        }

        .calc-item {
            background: #151f2e;
            padding: 15px;
            border: 1px solid var(--border-metal);
            border-radius: 8px;
        }
        .calc-item h3 { color: var(--text-light); margin-bottom: 10px; font-size: 1.1rem; }

        /* Table Responsive */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid var(--border-metal);
        }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th, td { padding: 12px; text-align: right; border-bottom: 1px solid var(--border-metal); font-size: 0.9rem; }
        th { background-color: #0f172a; color: var(--primary); font-weight: 800; white-space: nowrap; }
        tr:hover { background-color: rgba(255,255,255,0.05); cursor: pointer; }

        /* Footer Styling */
        footer {
            background-color: #0f172a;
            border-top: 4px solid var(--border-metal);
            padding: 2rem 1rem;
            text-align: center;
            margin-top: 4rem; /* Ù…Ø³Ø§ÙØ© Ø¹Ù„ÙˆÙŠØ© ÙƒØ¨ÙŠØ±Ø© Ù„ÙØµÙ„Ù‡ Ø¹Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        }
        .dev-name {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 1.5rem;
            display: block;
            text-shadow: 1px 1px 0px #000;
        }
        .social-link {
            color: var(--text-light);
            text-decoration: none;
            margin: 5px;
            font-weight: bold;
            border: 1px solid var(--primary);
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        .social-link:hover { background: var(--primary); color: #000; transform: translateY(-2px); }

        /* AI Loading Animation */
        .ai-steps {
            text-align: right;
            font-size: 0.9rem;
            margin-top: 10px;
            color: var(--primary);
        }
        .step { opacity: 0; margin-bottom: 5px; transition: opacity 0.5s; }
        .step.active { opacity: 1; }

        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ”§ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ Ø§Ù„Ù…Ø­ØªØ±Ù</h1>
        <p>ØªØ´Ø®ÙŠØµ Ø°ÙƒÙŠ + Ø­Ø§Ø³Ø¨Ø§Øª ÙÙ†ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©</p>
    </header>

    <div class="container">

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ -->
        <section class="card">
            <h2 class="section-title">ğŸ§  Ù…Ø­Ø±Ùƒ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ</h2>
            <div class="search-box">
                <input type="text" id="codeInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ (Ù…Ø«Ø§Ù„: P0300, P0420)">
                <button class="btn" onclick="searchCode()">
                    <span>ğŸ› ï¸</span> Ø¨Ø­Ø« Ø¹Ø§Ø¯ÙŠ
                </button>
                <button class="btn btn-ai" onclick="smartAIAnalyze()">
                    <span>ğŸ¤–</span> ØªØ­Ù„ÙŠÙ„ AI Ø°ÙƒÙŠ
                </button>
            </div>
            <div id="errorMsg" style="color: #ef4444; margin-top:10px; display:none; font-weight:bold;"></div>

            <!-- AI Loading Animation -->
            <div id="aiLoading" style="display:none; margin-top:20px; padding:15px; border:1px dashed #334155; border-radius:8px;">
                <div style="text-align:center; margin-bottom:10px;">Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
                <div class="ai-steps">
                    <div class="step" id="step1">1. ÙØ­Øµ Ù‡ÙŠÙƒÙ„ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ (Structure Check)...</div>
                    <div class="step" id="step2">2. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠ (Subsystem Analysis)...</div>
                    <div class="step" id="step3">3. Ù…Ø·Ø§Ø¨Ù‚Ø© Ø£Ø¹Ø±Ø§Ø¶ Ù…Ø­ØªÙ…Ù„Ø© (Symptom Matching)...</div>
                    <div class="step" id="step4">4. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙÙ†ÙŠ (Generating Report)...</div>
                </div>
            </div>

            <div id="resultCard" class="result-box">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #334155; padding-bottom:10px; margin-bottom:15px;">
                    <span id="resCode" class="code-display">P0000</span>
                    <span id="resBrand" style="background:var(--primary); color:#000; padding:4px 10px; font-weight:bold; border-radius:4px; font-size:0.8rem;">Ø¹Ø§Ù…</span>
                </div>
                <div style="display: grid; gap: 15px;">
                    <div><strong style="color:var(--primary)">âš ï¸ Ø§Ù„Ø¹Ø·Ù„:</strong> <span id="resMeaning">-</span></div>
                    <div><strong style="color:var(--text-dim)">âš™ï¸ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„:</strong> <span id="resCause">-</span></div>
                    <div><strong style="color:var(--text-dim)">ğŸ”© Ø§Ù„Ø­Ù„:</strong> <span id="resSolution">-</span></div>
                    <div id="aiInsight" style="background:rgba(59, 130, 246, 0.1); border:1px solid #3b82f6; padding:10px; border-radius:6px; display:none; margin-top:10px;">
                        <strong style="color:#60a5fa">ğŸ¤– Ø±Ø¤ÙŠØ© AI Ø§Ù„Ø°ÙƒÙŠØ©:</strong>
                        <p id="aiTextContent" style="font-size:0.9rem; margin-top:5px; color:#e2e8f0;"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ø³Ø¨Ø§Øª -->
        <section class="card">
            <h2 class="section-title">ğŸ§® Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙÙ†ÙŠ</h2>
            <div class="calc-grid">
                <div class="calc-item">
                    <h3>ğŸï¸ Ø³Ø¹Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ (CC)</h3>
                    <input type="number" id="bore" placeholder="Ù‚Ø·Ø± Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø© (Ù…Ù…)">
                    <input type="number" id="stroke" placeholder="Ø´ÙˆØ· Ø§Ù„Ù…ÙƒØ¨Ø³ (Ù…Ù…)" style="margin-top:10px;">
                    <input type="number" id="cylinders" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø³Ø·ÙˆØ§Ù†Ø§Øª" style="margin-top:10px;">
                    <button class="btn btn-secondary" style="width:100%; margin-top:15px;" onclick="calcEngineCC()">Ø§Ø­Ø³Ø¨</button>
                    <div id="resEngine" class="result-box" style="margin-top:10px;"></div>
                </div>
                <div class="calc-item">
                    <h3>â›½ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙˆÙ‚ÙˆØ¯</h3>
                    <input type="number" id="kmDriven" placeholder="Ø§Ù„Ù…Ø³Ø§ÙØ© (ÙƒÙ…)">
                    <input type="number" id="litersFilled" placeholder="Ø§Ù„ÙˆÙ‚ÙˆØ¯ (Ù„ØªØ±)" style="margin-top:10px;">
                    <button class="btn btn-secondary" style="width:100%; margin-top:15px;" onclick="calcFuel()">Ø§Ø­Ø³Ø¨</button>
                    <div id="resFuel" class="result-box" style="margin-top:10px;"></div>
                </div>
                <div class="calc-item">
                    <h3>âšªï¸ Ù…Ù‚Ø§Ø³ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª</h3>
                    <input type="text" id="tireSize" placeholder="Ù…Ø«Ø§Ù„: 205/55 R16">
                    <button class="btn btn-secondary" style="width:100%; margin-top:15px;" onclick="calcTire()">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</button>
                    <div id="resTire" class="result-box" style="margin-top:10px;"></div>
                </div>
            </div>
        </section>

        <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ (ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Øµ underneath) -->
        <section class="card">
            <h2 class="section-title">ğŸ“‘ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</h2>
            <div class="tabs" style="margin-bottom:15px; display:flex; gap:8px; overflow-x:auto; padding-bottom:5px; white-space:nowrap;">
                <button class="btn btn-secondary" onclick="filterTable('all', this)" style="width:auto; padding: 8px 15px;">Ø§Ù„ÙƒÙ„</button>
                <button class="btn btn-secondary" onclick="filterTable('American', this)" style="width:auto; padding: 8px 15px;">Ø£Ù…Ø±ÙŠÙƒÙŠ ğŸ‡ºğŸ‡¸</button>
                <button class="btn btn-secondary" onclick="filterTable('Japanese', this)" style="width:auto; padding: 8px 15px;">ÙŠØ§Ø¨Ø§Ù†ÙŠ ğŸ‡¯ğŸ‡µ</button>
                <button class="btn btn-secondary" onclick="filterTable('German', this)" style="width:auto; padding: 8px 15px;">Ø£Ù„Ù…Ø§Ù†ÙŠ ğŸ‡©ğŸ‡ª</button>
                <button class="btn btn-secondary" onclick="filterTable('Korean', this)" style="width:auto; padding: 8px 15px;">ÙƒÙˆØ±ÙŠ ğŸ‡°ğŸ‡·</button>
                <button class="btn btn-secondary" onclick="filterTable('Chinese', this)" style="width:auto; padding: 8px 15px;">ØµÙŠÙ†ÙŠ ğŸ‡¨ğŸ‡³</button>
            </div>
            <div class="table-container">
                <table id="codesTable">
                    <thead>
                        <tr><th>Ø§Ù„ÙƒÙˆØ¯</th><th>Ø§Ù„Ø¹Ø·Ù„</th><th>Ø§Ù„Ø´Ø±ÙƒØ©</th></tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </section>

    </div>

    <!-- Ø§Ù„ÙÙˆØªØ± ÙˆØ§Ù„Ø­Ù‚ÙˆÙ‚ (ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚) -->
    <footer>
        <span class="dev-name">ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ø¨Ùˆ Ø¹Ø³Ø§Ù Hz</span>
        <div style="display:flex; justify-content:center; gap:10px; margin-top:15px; flex-wrap:wrap;">
            <a href="https://snapchat.com/add/sww_p" target="_blank" class="social-link">Snapchat</a>
            <a href="https://instagram.com/sww_p" target="_blank" class="social-link">Instagram</a>
            <a href="https://twitter.com/sww_p" target="_blank" class="social-link">Twitter</a>
        </div>
    </footer>

    <script>
        /* ==========================================
           1. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù…ØµÙ†ÙØ©)
           ========================================== */
        let fullDatabase = [];
        function addCode(c, m, ca, s, b, o) {
            fullDatabase.push({ code: c, meaning: m, cause: ca, solution: s, brand: b, origin: o });
        }

        const americanCodes = [
            {c: "P0171", m: "Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹ (Bank 1)", ca: "ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡ØŒ Ø£Ù†Ø¨ÙˆØ¨ MAF", s: "ÙØ­Øµ Ø®Ø±Ø§Ø·ÙŠÙ… Ø§Ù„ØªÙ‡ÙˆÙŠØ©", b: "Ford", o: "American"},
            {c: "P0172", m: "Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯ ØºÙ†ÙŠ Ø¬Ø¯Ø§Ù‹ (Bank 1)", ca: "Ø¶ØºØ· ÙˆÙ‚ÙˆØ¯ Ø¹Ø§Ù„ÙŠØŒ Regulator", s: "ÙØ­Øµ Ù…Ù†Ø¸Ù… Ø¶ØºØ· Ø§Ù„ÙˆÙ‚ÙˆØ¯", b: "GM", o: "American"},
            {c: "P0300", m: "Ø¥Ø´Ø¹Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ / Ù…ØªØ¹Ø¯Ø¯", ca: "Ø´Ù…Ø¹Ø§ØªØŒ Ù…Ù„ÙØ§ØªØŒ Ø­Ù‚Ù†", s: "ÙØ­Øµ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ù„", b: "Chevy", o: "American"},
            {c: "P0301", m: "Ø¥Ø´Ø¹Ø§Ù„ Ø£Ø³Ø·ÙˆØ§Ù†Ø© 1", ca: "Ù…Ù„Ù Ø¥Ø´Ø¹Ø§Ù„ Coil-on-Plug", s: "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù ÙˆØ§Ù„Ø´Ù…Ø¹Ø©", b: "Ford", o: "American"},
            {c: "P0401", m: "ØªØ¯ÙÙ‚ EGR ØºÙŠØ± ÙƒØ§ÙÙ", ca: "ØµÙ…Ø§Ù… EGR Ù…Ø³Ø¯ÙˆØ¯ØŒ Ù‚Ù†ÙˆØ§Øª Ù…ØªØ³Ø®Ø©", s: "ØªÙ†Ø¸ÙŠÙ ØµÙ…Ø§Ù… EGR", b: "Ford", o: "American"},
            {c: "P0410", m: "Ù†Ø¸Ø§Ù… Ø§Ù„Ø¶Ø® Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ (AIR)", ca: "Ù…Ø¶Ø®Ø© Ù‡ÙˆØ§Ø¡ØŒ ØµÙ…Ø§Ù…", s: "ÙØ­Øµ Ø§Ù„Ù…Ø¶Ø®Ø©", b: "GM", o: "American"},
            {c: "P0133", m: "Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø­Ø³Ø§Ø³ O2 Ø¨Ø·ÙŠØ¦Ø©", ca: "Ø­Ø³Ø§Ø³ O2 Ù‚Ø¯ÙŠÙ…", s: "ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø³", b: "Ford", o: "American"},
            {c: "P0440", m: "Ø¹Ø·Ù„ Ø¹Ø§Ù… ÙÙŠ Ù†Ø¸Ø§Ù… Evap", ca: "ØºØ·Ø§Ø¡ Ø¨Ù†Ø²ÙŠÙ†ØŒ Ø®Ø±Ø·ÙˆÙ…", s: "ÙØ­Øµ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯", b: "Chrysler", o: "American"},
            {c: "P0455", m: "ØªØ³Ø±ÙŠØ¨ ÙƒØ¨ÙŠØ± ÙÙŠ Ù†Ø¸Ø§Ù… Evap", ca: "ØºØ·Ø§Ø¡ Ø§Ù„Ø®Ø²Ø§Ù† Ù…ÙÙ‚ÙˆØ¯", s: "ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØºØ·Ø§Ø¡", b: "Dodge", o: "American"},
            {c: "P0601", m: "Ø®Ø·Ø£ Ø°Ø§ÙƒØ±Ø© ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…", ca: "PCM ØªØ§Ù„Ù", s: "Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø±Ù…Ø¬Ø© Ø£Ùˆ ØªØ¨Ø¯ÙŠÙ„", b: "Chrysler", o: "American"}
        ];

        const koreanCodes = [
            {c: "P2096", m: "Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø®Ù„Ù Ø§Ù„Ù…Ø­ÙØ§Ø² Ø¶Ø¹ÙŠÙØ© (Bank 1)", ca: "Ø­Ø³Ø§Ø³ O2 Ø®Ù„ÙÙŠ", s: "ÙØ­Øµ Ø§Ù„Ø­Ø³Ø§Ø³", b: "Hyundai", o: "Korean"},
            {c: "P0101", m: "Ù†Ø·Ø§Ù‚/Ø£Ø¯Ø§Ø¡ MAF", ca: "Ø³Ù„Ùƒ ØªÙˆØµÙŠÙ„ØŒ Ø­Ø³Ø§Ø³ Ù…ØªØ³Ø®", s: "ÙØ­Øµ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª", b: "Kia", o: "Korean"},
            {c: "P0171", m: "Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹ (Bank 1)", ca: "ØªØ³Ø±ÙŠØ¨ ÙØ±Ø§Øº ÙÙŠ Ø§Ù„Ù…Ø´Ø¹Ø¨", s: "ÙØ­Øµ Ø§Ù„Ù…Ø´Ø¹Ø¨", b: "Hyundai", o: "Korean"},
            {c: "P0174", m: "Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯ Ø¶Ø¹ÙŠÙ (Bank 2)", ca: "ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡", s: "ÙØ­Øµ Ø§Ù„Ù…Ø´Ø¹Ø¨", b: "Hyundai", o: "Korean"},
            {c: "P0128", m: "Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø¨Ø±Ø¯ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø­Ø¯", ca: "ØªØ±Ù…ÙˆØ³ØªØ§Øª Ù…ÙØªÙˆØ­", s: "ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±Ù…ÙˆØ³ØªØ§Øª", b: "Hyundai", o: "Korean"},
            {c: "P1606", m: "Ø·Ù„Ø¨ Ø¥Ù†Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ (MIL)", ca: "Ø¹Ø·Ù„ ECU", s: "ÙØ­Øµ ECU", b: "Hyundai", o: "Korean"}
        ];

        const chineseCodes = [
            {c: "P1607", m: "Ø®Ø·Ø£ ÙÙŠ Ø°Ø§ÙƒØ±Ø© ECU (Internal)", ca: "Ø¨Ø±Ù…Ø¬Ø©", s: "ÙÙ„Ø§Ø´ Ø¨Ø±Ø§Ù…Ø¬", b: "Geely", o: "Chinese"},
            {c: "P2187", m: "Ù†Ø¸Ø§Ù… Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ù…ÙˆÙ„", ca: "ØªØ³Ø±ÙŠØ¨ ÙØ±Ø§Øº", s: "ÙØ­Øµ Ø§Ù„Ù…Ø´Ø¹Ø¨", b: "Chery", o: "Chinese"},
            {c: "P050B", m: "Ø¥Ø´Ø¹Ø§Ù„ Ø¨Ø§Ø±Ø¯ (Cold Start)", ca: "Ø´Ù…Ø¹Ø§Øª Ø£Ùˆ ÙˆÙ‚ÙˆØ¯", s: "ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ù…Ø¹Ø§Øª", b: "MG", o: "Chinese"},
            {c: "P1112", m: "Ø­Ø³Ø§Ø³ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ (IAT) Ø¹Ø§Ù„ÙŠ", ca: "ØªÙ…Ø§Ø³ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ", s: "ÙØ­Øµ Ø§Ù„Ø³Ù„Ùƒ", b: "Haval", o: "Chinese"},
            {c: "P0128", m: "Ø­Ø±Ø§Ø±Ø© Ù…Ø¨Ø±Ø¯ Ù…Ù†Ø®ÙØ¶Ø©", ca: "ØªØ±Ù…ÙˆØ³ØªØ§Øª", s: "ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±Ù…ÙˆØ³ØªØ§Øª", b: "BYD", o: "Chinese"}
        ];

        const japaneseCodes = [
            {c: "P0171", m: "Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹", ca: "ØªØ³Ø±ÙŠØ¨ Ù‡ÙˆØ§Ø¡", s: "ÙØ­Øµ Ø®Ø±Ø§Ø·ÙŠÙ… Ø§Ù„ØªÙ‡ÙˆÙŠØ©", b: "Toyota", o: "Japanese"},
            {c: "P0340", m: "Ø¥Ø´Ø§Ø±Ø© Ø­Ø³Ø§Ø³ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø±ÙÙ‚ÙŠ", ca: "Ø­Ø³Ø§Ø³ CMP", s: "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø³", b: "Nissan", o: "Japanese"},
            {c: "P0300", m: "Ø¥Ø´Ø¹Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ", ca: "Ø´Ù…Ø¹Ø§ØªØŒ Ù…Ù„ÙØ§Øª", s: "ÙØ­Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ù„", b: "Honda", o: "Japanese"},
            {c: "P2647", m: "Ø¹Ø·Ù„ Ù…Ø­Ø±Ùƒ VTEC", ca: "Ø¶ØºØ· Ø²ÙŠØª VTEC", s: "ÙØ­Øµ Ø³ÙˆÙ„ÙŠÙ†ÙˆÙŠØ¯ VTEC", b: "Honda", o: "Japanese"},
            {c: "P0446", m: "ØµÙ…Ø§Ù… ØªÙ‡ÙˆÙŠØ© Evap Ù…Ø´ØºÙˆÙ„ Ø·ÙˆÙŠÙ„Ø§Ù‹", ca: "ØµÙ…Ø§Ù… VSV", s: "ÙØ­Øµ Ø§Ù„ØµÙ…Ø§Ù…", b: "Toyota", o: "Japanese"}
        ];

        const germanCodes = [
            {c: "P0017", m: "Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø±ÙÙ‚ÙŠ/Ø§Ù„Ø­Ø¯Ø§ÙØ©", ca: "ØªÙˆÙ‚ÙŠØª Ø§Ù„ÙƒØ§Ù…Ø§Øª (Vanos)", s: "ÙØ­Øµ Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØª", b: "BMW", o: "German"},
            {c: "P0299", m: "Ø¶ØºØ· Ø§Ù„ØªÙŠØ±Ø¨Ùˆ Ù…Ù†Ø®ÙØ¶", ca: "ØªÙˆØ±Ø¨ÙŠÙ† ØªØ§Ù„ÙØŒ Ø£Ù†Ø§Ø¨ÙŠØ¨ Ù…ÙØµÙˆÙ„Ø©", s: "ÙØ­Øµ Ø§Ù„ØªÙŠØ±Ø¨Ùˆ", b: "VW/Audi", o: "German"},
            {c: "P2002", m: "ÙÙ„ØªØ± Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª (DPF) ÙƒÙØ§Ø¡ØªÙ‡ ØªØ­Øª Ø§Ù„Ø­Ø¯", ca: "ØªÙ†Ø¸ÙŠÙ Ø£Ùˆ ØªØºÙŠÙŠØ± DPF", s: "Regeneration", b: "Mercedes", o: "German"},
            {c: "P0411", m: "ØªØ¯ÙÙ‚ Ù‡ÙˆØ§Ø¡ Ø«Ø§Ù†ÙˆÙŠ ØºÙŠØ± ØµØ­ÙŠØ­", ca: "Ù…Ø¶Ø®Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ©", s: "ÙØ­Øµ Ø§Ù„Ù…Ø¶Ø®Ø© ÙˆØ§Ù„ØµÙ…Ø§Ù…Ø§Øª", b: "Audi", o: "German"}
        ];

        const specificCodes = [
            ...americanCodes, ...koreanCodes, ...chineseCodes, ...japaneseCodes, ...germanCodes
        ];

        specificCodes.forEach(item => addCode(item.c, item.m, item.ca, item.s, item.b, item.o));

        for (let i = 100; i <= 799; i++) {
            if (!specificCodes.some(x => x.c === "P"+i)) {
                addCode("P"+i, "Ø¹Ø·Ù„ Ø¹Ø§Ù… ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…", "Ø¯Ø§Ø¦Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø£Ùˆ Ø­Ø³Ø§Ø³", "ÙØ­Øµ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø±", "Generic", "All");
            }
        }

        /* ==========================================
           2. Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø­Ø§ÙƒÙŠ (Smart AI Logic)
           ========================================== */
        function smartAIAnalyze() {
            const input = document.getElementById('codeInput').value.trim().toUpperCase();
            const aiLoading = document.getElementById('aiLoading');
            const resultCard = document.getElementById('resultCard');
            const errorMsg = document.getElementById('errorMsg');
            const steps = [document.getElementById('step1'), document.getElementById('step2'), document.getElementById('step3'), document.getElementById('step4')];

            if (!input) { alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø£ÙˆÙ„Ø§Ù‹"); return; }
            
            resultCard.classList.remove('active');
            errorMsg.style.display = 'none';
            aiLoading.style.display = 'block';
            steps.forEach(s => s.classList.remove('active'));

            setTimeout(() => steps[0].classList.add('active'), 500);
            setTimeout(() => steps[1].classList.add('active'), 1500);
            setTimeout(() => steps[2].classList.add('active'), 2500);
            setTimeout(() => {
                steps[3].classList.add('active');
                aiLoading.style.display = 'none';
                generateSmartResult(input);
            }, 3500);
        }

        function generateSmartResult(input) {
            const dbResult = fullDatabase.find(c => c.code === input);
            
            const firstChar = input.charAt(0);
            const system = firstChar === 'P' ? "Powertrain (Ù…Ø­Ø±Ùƒ/Ù†Ø§Ù‚Ù„)" : 
                           firstChar === 'C' ? "Chassis (Ø´Ø§ØµÙŠ/ÙØ±Ø§Ù…Ù„)" : 
                           firstChar === 'B' ? "Body (Ù‡ÙŠÙƒÙ„/ÙƒÙ‡Ø±Ø¨Ø§Ø¡)" : 
                           firstChar === 'U' ? "Network (Ø´Ø¨ÙƒØ© Ø§ØªØµØ§Ù„)" : "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
            
            const secondChar = input.charAt(1);
            const type = secondChar === '0' ? "Ù‚ÙŠØ§Ø³ÙŠ Ø¹Ø§Ù… (Generic)" : "Ø®Ø§Øµ Ø¨Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØµÙ†Ø¹Ø© (Manufacturer Specific)";

            let aiInsightText = "";
            
            if (dbResult) {
                aiInsightText = `ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù†ÙˆØ¹ (${type}). Ø§Ù„Ø¹Ø·Ù„ ÙŠÙ‚Ø¹ ÙÙŠ Ù†Ø¸Ø§Ù… (${system}). ÙŠÙˆØµÙ‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© (Connectors) Ù‚Ø¨Ù„ ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„ØºØ§Ù„ÙŠØ©ØŒ Ø­ÙŠØ« Ø£Ù† 40% Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ ØªÙƒÙˆÙ† Ù…Ø¬Ø±Ø¯ ÙƒØ§Ø¨Ù„ Ù…ÙØµÙˆÙ„ Ø£Ùˆ Ù…ÙˆØµÙ„ Ù…ØªØ£ÙƒÙ„.`;
            } else {
                if (firstChar === 'P') {
                    const thirdChar = parseInt(input.charAt(2));
                    let subSystem = "";
                    if(thirdChar === 0 || thirdChar === 1) subSystem = "Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡ÙˆØ§Ø¡ ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯ (Fuel/Air Metering)";
                    else if(thirdChar === 2) subSystem = "Ù†Ø¸Ø§Ù… Ø­Ù‚Ù† Ø§Ù„ÙˆÙ‚ÙˆØ¯ (Injector Circuit)";
                    else if(thirdChar === 3) subSystem = "Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ù„ (Ignition System)";
                    else if(thirdChar === 4) subSystem = "Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†Ø¨Ø¹Ø§Ø«Ø§Øª (Auxiliary Emissions)";
                    else if(thirdChar === 5) subSystem = "Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø®Ù…ÙˆÙ„ (Vehicle Speed/Idle)";
                    else if(thirdChar === 6) subSystem = "ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Computer Output)";
                    else if(thirdChar === 7) subSystem = "Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ© (Transmission)";
                    
                    aiInsightText = `Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù„ÙƒÙ† Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ: <strong>${subSystem}</strong>. Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ ${firstChar}${secondChar}ØŒ ÙÙ‡Ùˆ ${type}. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø³Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆÙˆØ­Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ (Relays).`;
                } else {
                    aiInsightText = `ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ù†Ø¸Ø§Ù… (${system}). ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ…Ø§Ù…Ø§Øª (Fuses).`;
                }
            }

            displayResult(input, dbResult, aiInsightText);
        }

        function displayResult(code, data, aiText) {
            document.getElementById('resCode').textContent = code;
            
            if (data) {
                document.getElementById('resBrand').textContent = data.brand;
                document.getElementById('resMeaning').textContent = data.meaning;
                document.getElementById('resCause').textContent = data.cause;
                document.getElementById('resSolution').textContent = data.solution;
            } else {
                document.getElementById('resBrand').textContent = "ØªØ­Ù„ÙŠÙ„ AI";
                document.getElementById('resMeaning').textContent = "Ø¹Ø·Ù„ ØºÙŠØ± Ù…ÙˆØ«Ù‚ (ØªØ­Ù„ÙŠÙ„ Ù‡ÙŠÙƒÙ„ÙŠ)";
                document.getElementById('resCause').textContent = "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: Ø§Ù†Ø¸Ø± Ù„Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ© Ø¨Ø§Ù„Ø£Ø³ÙÙ„";
                document.getElementById('resSolution').textContent = "Ø§ØªØ¨Ø¹ Ø®Ø·ÙˆØ§Øª Ø§Ù„ÙØ­Øµ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ";
            }

            document.getElementById('aiInsight').style.display = 'block';
            document.getElementById('aiTextContent').innerHTML = aiText;
            document.getElementById('resultCard').classList.add('active');
        }

        function searchCode() {
            const input = document.getElementById('codeInput').value.trim().toUpperCase();
            const errorMsg = document.getElementById('errorMsg');
            const resultCard = document.getElementById('resultCard');
            const aiInsight = document.getElementById('aiInsight');

            if (!input) return;
            
            resultCard.classList.remove('active');
            errorMsg.style.display = 'none';
            aiInsight.style.display = 'none';

            const result = fullDatabase.find(c => c.code === input);

            if (result) {
                displayResult(result.code, result, null);
            } else {
                errorMsg.innerHTML = `Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ <b>${input}</b>. Ø¬Ø±Ø¨ Ø²Ø± "ØªØ­Ù„ÙŠÙ„ AI Ø°ÙƒÙŠ".`;
                errorMsg.style.display = 'block';
            }
        }

        /* ==========================================
           3. Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨
           ========================================== */
        function calcEngineCC() {
            const bore = parseFloat(document.getElementById('bore').value);
            const stroke = parseFloat(document.getElementById('stroke').value);
            const cylinders = parseFloat(document.getElementById('cylinders').value);
            const resBox = document.getElementById('resEngine');
            if (!bore || !stroke || !cylinders) return;
            const radius = bore / 2;
            const totalVolume = (Math.PI * Math.pow(radius, 2) * stroke * cylinders) / 1000;
            resBox.innerHTML = `<strong>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</strong> ${totalVolume.toFixed(0)} CC`;
            resBox.style.display = 'block';
        }

        function calcFuel() {
            const km = parseFloat(document.getElementById('kmDriven').value);
            const liters = parseFloat(document.getElementById('litersFilled').value);
            const resBox = document.getElementById('resFuel');
            if (!km || !liters) return;
            const kmPerLiter = km / liters;
            const litersPer100km = (liters / km) * 100;
            resBox.innerHTML = `<strong>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</strong> ${kmPerLiter.toFixed(1)} ÙƒÙ…/Ù„ØªØ± | ${litersPer100km.toFixed(1)} Ù„ØªØ±/100ÙƒÙ…`;
            resBox.style.display = 'block';
        }

        function calcTire() {
            const input = document.getElementById('tireSize').value;
            const resBox = document.getElementById('resTire');
            const match = input.match(/(\d{2,3})\/(\d{2,3})[Rr](\d{2,3})/);
            if (!match) {
                resBox.innerHTML = "Ø§Ù„ØµÙŠØºØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø© (Ù…Ø«Ø§Ù„: 205/55 R16)";
                resBox.style.display = 'block';
                return;
            }
            const width = parseInt(match[1]);
            const profile = parseInt(match[2]);
            const rim = parseInt(match[3]);
            const diameterMM = (rim * 25.4) + ((width * profile / 100) * 2);
            const circumferenceCM = (diameterMM * Math.PI) / 10;
            resBox.innerHTML = `<strong>Ø§Ù„Ù…Ø­ÙŠØ·:</strong> ${circumferenceCM.toFixed(0)} Ø³Ù…`;
            resBox.style.display = 'block';
        }

        /* ==========================================
           4. Ø§Ù„Ø¬Ø¯ÙˆÙ„
           ========================================== */
        function renderTable(filterOrigin = 'all') {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            let data = specificCodes;

            if (filterOrigin !== 'all') {
                data = specificCodes.filter(item => item.o === filterOrigin);
            }

            if(data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯ Ù…Ø®ØµØµØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©.</td></tr>';
                return;
            }

            data.forEach(item => {
                tbody.innerHTML += `
                    <tr onclick="document.getElementById('codeInput').value='${item.c}'; searchCode();">
                        <td style="color:var(--primary); font-weight:bold; font-size:1.1rem;">${item.c}</td>
                        <td>${item.m}</td>
                        <td style="color:var(--text-dim); font-size:0.8rem;">${item.b}</td>
                    </tr>
                `;
            });
        }

        function filterTable(origin, btn) {
            document.querySelectorAll('.tabs .btn').forEach(b => {
                b.style.background = '#334155'; 
                b.style.color = '#fff';
            });
            btn.style.background = 'var(--primary)';
            btn.style.color = '#000';
            renderTable(origin);
        }

        window.onload = function() { renderTable(); };
        document.getElementById('codeInput').addEventListener('keyup', function(e) { if(e.key === 'Enter') searchCode(); });

    </script>
</body>
</html>
